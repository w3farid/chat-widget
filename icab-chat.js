!function(){const e=document.createElement("style");e.innerHTML='\n  /* Responsive Design */\n@media only screen and (max-width: 768px) {\n  #feye-ai-chat-widget-content {\n    width: 90%;\n  }\n}\n\n@media only screen and (min-width: 768px) {\n  #feye-ai-chat-widget-content {\n    width: 360px;\n  }\n}\n\n/* Chat Widget Container */\n#feye-ai-chat-widget-content {\n  border-style: solid;\n  border-width: 0;\n  box-shadow: rgba(156, 156, 156, 0.45) 1px 1px 10px;\n  border-radius: 4px;\n  margin: 0 24px 120px 0;\n  z-index: 11;\n  transition: width 0.3s ease-in-out, height 0.3s ease-in-out;\n}\n\n.feye-ai-chat-widget-feyeAiChatWidget {\n  position: fixed;\n  z-index: 1000 !important;\n  right: 0;\n  bottom: 1%;\n}\n\n.feye-ai-chatbot-container {\n  display: flex;\n}\n\n/* Chat Widget Icon */\n#chat-widget-built-in-icon {\n  z-index: 100;\n}\n\n.icab-ai-chat-widget-chatIconWrapper {\n  position: fixed;\n  cursor: pointer;\n  overflow: hidden;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  bottom: 0;\n  right: 0;\n}\n\n.feye-ai-chat-widget-chatIconWrapper img {\n  cursor: pointer;\n  height: 100%;\n  width: 100%;\n}\n\n.icab-ai-chat-widget-chatIconWrapper img {\n  display: inline-block;\n  vertical-align: middle;\n  max-width: 100%;\n  height: auto;\n  -ms-interpolation-mode: bicubic;\n}\n\n/* Chat Widget */\n.chat-widget {\n  border: 1px solid #ccc;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  background-color: #f9f9f9;\n  overflow: hidden;\n}\n\n.chat-header {\n  background-color: #03a84e;\n  color: white;\n  padding: 10px;\n  border-top-left-radius: 8px;\n  border-top-right-radius: 8px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.chat-header .close-btn {\n  background: none;\n  border: none;\n  cursor: pointer;\n  margin-left: auto; /* Ensures the button aligns to the right */\n}\n\n.chat-header .close-btn svg {\n  fill: white; /* Change to your desired color */\n  transition: fill 0.3s;\n}\n\n.chat-header .close-btn:hover svg {\n  fill: #c3bfbf; /* Change to your desired hover color */\n}\n\n.status-indicator {\n  position: absolute;\n  top: 33px;\n  left: 22px;\n  width: 6px;\n  height: 6px;\n  background-color: black;\n  border: 2px solid rgba(255, 255, 255, 0);\n  border-radius: 50%;\n}\n\n.chat-title {\n  flex-grow: 1;\n  margin-left: 10px;\n}\n\n.chat-title .chat-status {\n  font-size: 0.9em;\n  color: #cfcfcf;\n  padding-left: 15px;\n}\n\n/* Chat Body */\n.chat-body {\n  padding: 0;\n}\n\n.chat-body p {\n  font-size: 14px;\n  margin-bottom: 10px;\n}\n\n.chat-log {\n  height: 420px;\n  overflow-y: auto;\n  padding: 10px;\n  background-color: #f9f9f9;\n  display: flex;\n  flex-direction: column;\n}\n\n.chat-log .message {\n  margin: 10px 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.chat-log .message-content {\n  max-width: 100%;\n  padding: 10px;\n  border-radius: 4px;\n  position: relative;\n  word-wrap: break-word;\n}\n\n.chat-log .message.You .message-content {\n  background-color: #e0f7fa;\n  border: 1px solid #b2ebf2;\n  align-self: flex-end;\n}\n\n.chat-log .message.FeyeBot .message-content {\n  background-color: #fff;\n  border: 1px solid #ccc;\n  align-self: flex-start;\n}\n\n.chat-log .message.You .message-content::before {\n  content: "";\n  position: absolute;\n  top: 10px;\n  right: -10px;\n  width: 0;\n  height: 0;\n  border-top: 10px solid transparent;\n  border-bottom: 10px solid transparent;\n  border-left: 10px solid #e0f7fa;\n}\n\n/* Input Group */\n#feye-ai-chat-widget-content .input-group {\n  display: flex;\n  align-items: center;\n  margin-top: 10px;\n  border-top: 1px solid #ccc;\n  padding: 5px;\n  background-color: #fff;\n  height: 60px !important;\n  overflow: hidden;\n}\n\n#feye-ai-chat-widget-content .chat-input {\n  flex-grow: 1;\n  padding: 10px;\n  border: none;\n  outline: none;\n  resize: none;\n  width: calc(100% - 50px);\n  max-height: 200px;\n  height: auto;\n  min-height: 25px;\n}\n\n#feye-ai-chat-widget-content textarea.chat-input {\n  resize: none;\n  overflow: hidden;\n}\n\n#feye-ai-chat-widget-content .send-btn {\n  background-color: #03a84e;\n  color: white;\n  border: none;\n  padding: 10px;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-left: 5px;\n}\n\n#feye-ai-chat-widget-content .send-btn:hover {\n  background-color: #486a6a;\n}\n\n#feye-ai-chat-widget-content .attach-btn {\n  background-color: transparent;\n  border: none;\n  padding: 0;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-left: 5px;\n}\n\n#feye-ai-chat-widget-content .attach-btn:hover {\n  color: #000;\n}\n\n/* Loader */\n.dot {\n  width: 10px;\n  height: 10px;\n  background: #5a7d7c;\n  border-radius: 50%;\n  margin: 0 5px;\n  animation: pulse 1.5s infinite;\n}\n\n.chat-loader {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 50px;\n}\n\n@keyframes pulse {\n  0%,\n  100% {\n    transform: scale(0.8);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.2);\n    opacity: 0.5;\n  }\n}\n\n/* Button List */\n.button-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  margin-top: 10px;\n}\n\n.button-list li {\n  margin-bottom: -1px;\n}\n\n.button-list button {\n  display: block;\n  width: 100%;\n  padding: 10px 15px;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  border-bottom: none;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.button-list button:hover {\n  background-color: #f1f1f1;\n}\n\n.button-list button:focus {\n  outline: none;\n  background-color: #e0e0e0;\n}\n\n.button-list li:last-child button {\n  border-bottom: 1px solid #ccc;\n}\n\n/* Modals */\n#feye-ai-login-modal,\n#submit-issue-modal,\n#issues-list-modal,\n#assignee-details-modal {\n  display: none;\n}\n\n.feye-ai-modal {\n  position: fixed;\n  z-index: 99999;\n  right: 23px;\n  bottom: 20%;\n  width: 360px;\n  overflow: hidden;\n}\n\n.feye-ai-modal-content {\n  background-color: #fefefe;\n  margin: 15% auto;\n  padding: 20px;\n  border: 1px solid #d9d9d9;\n  width: 80%;\n  max-width: 400px;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.feye-ai-close-modal,\n.submit-issue-close-modal,\n.issues-list-close-modal,\n.assignee-details-close-modal {\n  color: #aaa;\n  float: right;\n  font-size: 28px;\n  font-weight: bold;\n}\n\n.feye-ai-close-modal:hover,\n.feye-ai-close-modal:focus,\n.submit-issue-close-modal:hover,\n.submit-issue-close-modal:focus,\n.issues-list-close-modal:hover,\n.issues-list-close-modal:focus,\n.assignee-details-close-modal:hover,\n.assignee-details-close-modal:focus {\n  color: black;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.feye-ai-modal h2 {\n  margin-top: 0;\n}\n\n.feye-ai-modal form {\n  display: flex;\n  flex-direction: column;\n}\n\n.feye-ai-modal form label {\n  margin-bottom: 5px;\n}\n\n.feye-ai-modal form input {\n  margin-bottom: 15px;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n\n.feye-ai-modal form button {\n  padding: 10px;\n  background-color: #03a84e;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.feye-ai-modal form button:hover {\n  background-color: #486a6a;\n}\n\n.feye-ai-radio-group {\n  margin: 10px 0;\n}\n\n.feye-ai-radio-group label {\n  margin-right: 15px;\n}\n\n.blur {\n  filter: blur(5px);\n  pointer-events: none;\n}\n\n/* Chat Header Buttons */\n.header-buttons {\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.settings-btn {\n  background: none;\n  border: none;\n  cursor: pointer;\n  margin-right: auto;\n}\n\n.settings-btn svg {\n  fill: white; /* Change to your desired color */\n  transition: fill 0.3s;\n}\n\n.settings-btn:hover svg {\n  fill: #ccc; /* Change to your desired hover color */\n}\n\n.dropdown-content {\n  display: none;\n  position: absolute;\n  background-color: #f9f9f9;\n  min-width: 180px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);\n  z-index: 1;\n  right: 6px;\n  top: 40px;\n}\n\n.dropdown-content a {\n  color: black;\n  padding: 12px 16px;\n  text-decoration: none;\n  display: block;\n}\n\n.dropdown-content a:hover {\n  background-color: #f1f1f1;\n}\n\n.show {\n  display: block;\n}\n\n/* Welcome Message */\n.welcome-message {\n  display: none;\n  background-color: white;\n  border-radius: 8px;\n  padding: 10px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  position: absolute;\n  bottom: 80px;\n  right: 20px;\n  z-index: 1000;\n  width: auto;\n  max-width: 250px;\n  text-align: center;\n}\n\n/* Submit Issue Modal */\n#submit-issue-modal .submit-issue-close-modal {\n  color: #aaa;\n  float: right;\n  font-size: 28px;\n  font-weight: bold;\n}\n\n/* Issues List Modal */\n#issues-list-modal {\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background-color: rgba(0, 0, 0, 0.5); /* Black overlay */\n  z-index: 1001; /* Ensure it appears above other elements */\n}\n\n#issues-list-modal .feye-ai-modal-content {\n  background-color: #fff;\n  margin: 10% auto;\n  padding: 20px;\n  border: 1px solid #ccc;\n  width: 80%;\n  max-width: 500px;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n#issues-list-modal .issues-list-close-modal {\n  color: #aaa;\n  float: right;\n  font-size: 28px;\n  font-weight: bold;\n}\n\n#issues-list-modal .issues-list-close-modal:hover,\n#issues-list-modal .issues-list-close-modal:focus {\n  color: black;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.issues-list {\n  margin-top: 20px;\n}\n\n.issue-card {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #fff;\n  padding: 10px 15px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  margin-bottom: 10px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.issue-card h5 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 500;\n}\n\n.issue-card p {\n  margin: 0;\n  font-size: 14px;\n  color: #555;\n}\n\n.issue-card .issue-status {\n  font-weight: bold;\n  margin-right: 10px;\n}\n\n.issue-card .issue-info {\n  cursor: pointer;\n  color: #03a84e;\n}\n\n/* Assignee Details Modal */\n#assignee-details-modal {\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background-color: rgba(0, 0, 0, 0.5); /* Black overlay */\n  z-index: 1001; /* Ensure it appears above other elements */\n}\n\n#assignee-details-modal .feye-ai-modal-content {\n  background-color: #fff;\n  margin: 10% auto;\n  padding: 20px;\n  border: 1px solid #ccc;\n  width: 80%;\n  max-width: 500px;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n#assignee-details-modal .assignee-details-close-modal {\n  color: #aaa;\n  float: right;\n  font-size: 28px;\n  font-weight: bold;\n}\n\n#assignee-details-modal .assignee-details-close-modal:hover,\n#assignee-details-modal .assignee-details-close-modal:focus {\n  color: black;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n#assignee-details h3 {\n  margin-top: 10px;\n  font-size: 18px;\n  color: #333;\n}\n\n#assignee-details p {\n  margin: 5px 0;\n  font-size: 16px;\n  color: #555;\n}\n\n/* Bot Header */\n.bot-header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 5px;\n}\n\n.bot-header .chatbot-text {\n  margin-left: 10px;\n  font-weight: bold;\n  font-size: 14px;\n}\n\n/* ChatBot Icon */\n.bot-header svg {\n  width: 24px;\n  height: 24px;\n  fill: currentColor;\n}\n\n\n\n/* Animations */\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translate(-50%, -45%);\n  }\n  to {\n    opacity: 1;\n    transform: translate(-50%, -50%);\n  }\n}\n\n  ',document.head.appendChild(e);document.querySelector(".feye-ai-chatbot-container").innerHTML='\n      <div class="feye-ai-chat-widget-feyeAiChatWidgetWrapper">\n            \x3c!-- Login Modal --\x3e\n            <div id="feye-ai-login-modal" class="feye-ai-modal">\n                <div class="feye-ai-modal-content">\n                    <span class="feye-ai-close-modal">&times;</span>\n                    <h2>Login</h2>\n                    <form id="feye-ai-login-form">\n                        <label for="username" id="username-label">Enrollment No.:</label>\n                        <input type="text" id="username" name="username" required>\n                        <label for="password">Password:</label>\n                        <input type="password" id="password" name="password" required>\n                        \x3c!-- Radio buttons for Member and Student --\x3e\n                        <div class="feye-ai-radio-group">\n                            <label>\n                                <input type="radio" id="member-radio" checked="true" name="userType" value="Member"\n                                    required>\n                                Member\n                            </label>\n                            <label>\n                                <input type="radio" id="student-radio" name="userType" value="Student" required>\n                                Student\n                            </label>\n                        </div>\n                        <button type="submit">Login</button>\n                    </form>\n                </div>\n            </div>\n\n            \x3c!-- Submit Issue Modal --\x3e\n            <div id="submit-issue-modal" class="feye-ai-modal">\n                <div class="feye-ai-modal-overlay"></div>\n                <div class="feye-ai-modal-content">\n                    <span class="submit-issue-close-modal">&times;</span>\n                    <h2>Submit Your Issue</h2>\n                    <form id="submit-issue-form">\n                        <label for="issue-title">Issue Title:</label>\n                        <input type="text" id="issue-title" name="issueTitle" required>\n                        <label for="issue-details">Issue Details:</label>\n                        <textarea id="issue-details" rows="5" name="issueDetails" required></textarea>\n                        <label for="issue-attachment">Supporting Documents:</label>\n                        <input type="file" id="issue-attachment" name="issueAttachment" multiple>\n                        <button type="submit">Submit</button>\n                    </form>\n                </div>\n            </div>\n\n\n            \x3c!-- Issues List Modal --\x3e\n            <div id="issues-list-modal" class="feye-ai-modal">\n                <div class="feye-ai-modal-content">\n                    <span class="issues-list-close-modal">&times;</span>\n                    <h2>Last Issues</h2>\n                    <div id="issues-list">\n                        \x3c!-- Issues will be dynamically inserted here --\x3e\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- Assignee Details Modal --\x3e\n            <div id="assignee-details-modal" class="feye-ai-modal">\n                <div class="feye-ai-modal-content">\n                    <span class="assignee-details-close-modal">&times;</span>\n                    <h2>Assignee Details</h2>\n                    <div id="assignee-details">\n                        \x3c!-- Assignee details will be dynamically inserted here --\x3e\n                    </div>\n                </div>\n            </div>\n\n\n\n            \x3c!-- Chat Widget --\x3e\n            <div id="feye-ai-chat-widget-content" style="display: none;"\n                class="feye-ai-chat-widget-feyeAiChatWidget icab-ai-chat-widget-bottom icab-ai-chat-widget-right">\n                <div class="chat-widget">\n                    <div class="chat-header">\n                        <div class="chat-title">\n                            ChatBot\n                            <div id="status-indicator" class="status-indicator"></div>\n                            <div id="chat-status" class="chat-status">Offline</div>\n                        </div>\n                        <div class="header-buttons">\n                            <button class="settings-btn">\n                                <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">\n                                    <path\n                                        d="M19.14,12.936l1.84-1.06c0.36-0.208,0.503-0.674,0.32-1.06l-1.76-3.06c-0.184-0.384-0.635-0.558-1.02-0.38l-1.92,0.8c-0.51-0.39-1.06-0.71-1.66-0.94l-0.32-2.12c-0.07-0.41-0.44-0.72-0.87-0.72h-3.52c-0.43,0-0.8,0.31-0.87,0.72l-0.32,2.12c-0.6,0.23-1.15,0.55-1.66,0.94l-1.92-0.8c-0.385-0.178-0.836-0.004-1.02,0.38l-1.76,3.06c-0.183,0.386-0.04,0.852,0.32,1.06l1.84,1.06c-0.05,0.32-0.08,0.64-0.08,0.98s0.03,0.66,0.08,0.98l-1.84,1.06c-0.36,0.208-0.503,0.674-0.32,1.06l1.76,3.06c0.184,0.384,0.635,0.558,1.02,0.38l1.92-0.8c0.51,0.39,1.06,0.71,1.66,0.94l0.32,2.12c0.07,0.41,0.44,0.72,0.87,0.72h3.52c0.43,0,0.8-0.31,0.87-0.72l0.32-2.12c0.6-0.23,1.15-0.55,1.66-0.94l1.92,0.8c0.385,0.178,0.836,0.004,1.02-0.38l1.76-3.06c0.183-0.386,0.04-0.852-0.32-1.06l-1.84-1.06c0.05-0.32,0.08-0.64,0.08-0.98S19.19,13.256,19.14,12.936z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z" />\n                                </svg>\n                            </button>\n\n                            <button class="close-btn">\n                                <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">\n                                    <path\n                                        d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />\n                                </svg>\n                            </button>\n\n                            <div id="settings-dropdown" class="dropdown-content">\n                                <a href="#" id="submit-issue" style="display: none;">Report an Issue</a>\n                                <a href="#" id="last-issues">View Recent Issues</a>\n                                <a href="#" id="clear-chat">Clear Chat History</a>\n                                <a href="#" id="login">Login/Logout</a>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div class="chat-body">\n                        <div id="feye-ai-chat-widget-bannerWrapper" class="feye-ai-chat-widget-bannerWrapper"\n                            style="border-style: solid; border-width: 0px; color: black; font-size: 12px; line-height: 1.3; text-align: center; background-color: rgb(244, 243, 244); padding: 10px;">\n                            <a id="feye-ai-signIn" href="javascript:void(0)"> Sign in</a>\n                            <span id="feye-login-other-text">to submit your issue.</span>\n                        </div>\n                        <div class="chat-log" id="chat-log" style="font-size: 13pt;">\n                            <div id="three-dot-loader" class="chat-loader" style="display: none;">\n                                <div class="dot"></div>\n                                <div class="dot"></div>\n                                <div class="dot"></div>\n                            </div>\n                        </div>\n                        <div class="input-group feye-ai-chat-widget-messageFormWrapper">\n                            <input type="file" id="fileInput" style="display: none;">\n                            <button id="attachBtn" class="attach-btn" style="display: none;">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"\n                                    viewBox="0 0 24 24">\n                                    <path fill="currentColor" fill-rule="evenodd"\n                                        d="M9 7a5 5 0 0 1 10 0v8a7 7 0 1 1-14 0V9a1 1 0 0 1 2 0v6a5 5 0 0 0 10 0V7a3 3 0 1 0-6 0v8a1 1 0 1 0 2 0V9a1 1 0 1 1 2 0v6a3 3 0 1 1-6 0z"\n                                        clip-rule="evenodd"></path>\n                                </svg>\n                            </button>\n                            <textarea placeholder="Type your message" class="chat-input" rows="1"></textarea>\n                            <button class="send-btn">Send</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- Welcome Message --\x3e\n        <div id="welcome-message" class="welcome-message">🙌 Welcome back! How may I help you today? 🤖</div>\n        \x3c!-- Chat Widget Icon --\x3e\n        <div id="chat-widget-built-in-icon"\n            class="icab-ai-chat-widget-chatIconWrapper icab-ai-chat-widget-bottom icab-ai-chat-widget-right"\n            style="background-color: #03a84e; height: 55px; width: 55px; border-radius: 50%; box-shadow: none; margin: 0px 20px 20px 0px;">\n            <img alt="Chat bot icon" src="https://ebm.icaew.com/widget/1/deployment/images/icon-image/icon-image-1.png"\n                style="object-fit: contain;">\n        </div>\n  ';const n=document.createElement("script");function t(){const e={welcomeMessage:document.getElementById("welcome-message"),loginModal:document.getElementById("feye-ai-login-modal"),statusIndicator:document.getElementById("status-indicator"),chatStatus:document.getElementById("chat-status"),threeDotLoader:document.getElementById("three-dot-loader"),chatLog:document.querySelector(".chat-log"),chatInput:document.querySelector(".chat-input"),chatBotArea:document.getElementById("feye-ai-chat-widget-content"),usernameLabel:document.getElementById("username-label"),memberRadio:document.getElementById("member-radio"),studentRadio:document.getElementById("student-radio"),submitIssue:document.getElementById("submit-issue"),clearChat:document.getElementById("clear-chat"),login:document.getElementById("login"),signIn:document.getElementById("feye-ai-signIn"),signInText:document.getElementById("feye-login-other-text"),attachBtn:document.getElementById("attachBtn"),fileInput:document.getElementById("fileInput"),chatContainer:document.querySelector(".feye-ai-chatbot-container"),settingsBtn:document.querySelector(".settings-btn"),settingsDropdown:document.getElementById("settings-dropdown"),submitIssueModal:document.getElementById("submit-issue-modal"),submitIssueCloseModal:document.querySelector(".submit-issue-close-modal"),submitIssueForm:document.getElementById("submit-issue-form"),issuesModal:document.getElementById("issues-list-modal"),issuesListCloseModal:document.querySelector(".issues-list-close-modal"),lastIssuesLink:document.getElementById("last-issues"),issuesList:document.getElementById("issues-list"),assigneeDetailsModal:document.getElementById("assignee-details-modal"),assigneeDetailsCloseModal:document.querySelector(".assignee-details-close-modal"),assigneeDetails:document.getElementById("assignee-details")},n={BASE_URL:"",FILE_UPLOAD:"/api/v1/files/chat/upload",LOGIN_STUDENT:"/login-student",LOGIN_MEMBER:"https://auth.icab.org.bd/oauth/token",SUBMIT_ISSUE:"/api/v1/issues/submit-issue",CABOT_ICON:"/api/v1/files/view/691894f0-00d7-4746-8945-7300c1c472b5.png",FETCH_ISSUE:"/api/v1/issues/by-username",CHECK_TICKET:"/api/v1/issues/check-ticketNo"};let t=JSON.parse(localStorage.getItem("feye-ai-chat-widget-state"))||{config:{isLoggedIn:!1,widget:!1,isAssigned:!1},conversation:[],assignee:{}};const s=e.chatContainer.getAttribute("data-websocket-url");n.BASE_URL=s;const o=()=>{localStorage.setItem("feye-ai-chat-widget-state",JSON.stringify(t))},a=(e,n)=>{e.style.display=n?"block":"none"};let i;const d=()=>{const e=new SockJS(`${n.BASE_URL}/ws`);i=Stomp.over(e);const t=localStorage.getItem("feye_username")||`user_${Math.random().toString(36).substr(2,9)}`;localStorage.setItem("feye_username",t),i.connect({farid:t},c,u),e.onclose=()=>{r(!1)}},l=()=>{i&&i.disconnect((()=>{r(!1)}))},r=n=>{e.statusIndicator.style.backgroundColor=n?"#baff9d":"black",e.chatStatus.textContent=n?"Online":"Offline"},c=()=>{const e=localStorage.getItem("feye_username");i.subscribe(`/user/${e}/queue/messages`,m),i.subscribe(`/user/${e}/assign/queue/messages`,p),i.subscribe(`/user/${e}/agent/queue/messages`,h),i.send("/app/user.addUser",{},JSON.stringify({username:e,name:e,status:"ONLINE"})),i.send("/app/chat",{},JSON.stringify(g())),r(!0),window.addEventListener("beforeunload",(()=>{i.send("/app/user.disconnectUser",{},JSON.stringify({username:e,name:e,status:"OFFLINE"}))}))},u=e=>{r(!1)},g=()=>{let e=localStorage.getItem("feye_user_type"),n="Member"===e?"/user_login_member":"Student"===e?"/user_login_student":"Main Menu";return{senderId:localStorage.getItem("feye_username"),recipientId:t.assignee.senderId||"TECH_SUPPORT",content:n,timestamp:new Date,agent:sessionStorage.getItem("agent")||"LiveChat"}},m=e=>{let n=sessionStorage.getItem("agent");const t=JSON.parse(e.body);"Bot"===n?t.length>0?t.forEach((e=>{setTimeout((()=>{w(),f(e),I("FeyeBot",e)}),2e3)})):b("Sorry, I didn't understand that.","FeyeBot"):(b(t.content,"FeyeBot"),I("FeyeBot",t.content))},p=e=>{const n=JSON.parse(e.body);t.assignee=n,t.config.isAssigned=!0,b(n.content,"FeyeBot"),o()},h=e=>{const n=JSON.parse(e.body);sessionStorage.setItem("agent",n?.agent)},b=(n,t,s=null,o=null)=>{if(!n.trim()&&!s)return;const a=document.createElement("div");if(a.classList.add("message",t),n.trim()){const e=document.createElement("div");e.classList.add("message-content"),e.textContent=n,a.appendChild(e)}if(s){const e=document.createElement("div");if(e.classList.add("file-container"),o.startsWith("image/")){const n=document.createElement("img");n.src=s,n.alt="Attached Image",n.style.maxWidth="200px",n.style.maxHeight="200px",e.appendChild(n)}else if("application/pdf"===o){const n=document.createElement("a");n.href=s,n.textContent="View PDF",n.target="_blank",e.appendChild(n)}else{const n=document.createElement("a");n.href=s,n.textContent="Download File",n.download="",e.appendChild(n)}a.appendChild(e)}e.threeDotLoader.parentNode===e.chatLog?e.chatLog.insertBefore(a,e.threeDotLoader):e.chatLog.appendChild(a),e.chatLog.scrollTop=e.chatLog.scrollHeight},f=t=>{const s=document.createElement("div");s.classList.add("message","FeyeBot");const o=document.createElement("div");o.classList.add("bot-header");const a=document.createElement("img");a.setAttribute("src",`${n.BASE_URL+n.CABOT_ICON}`),a.setAttribute("width","18"),a.setAttribute("height","18"),a.setAttribute("alt","Bot Icon"),o.appendChild(a);const i=document.createElement("span");i.textContent="ICAB-Bot",i.classList.add("chatbot-text"),o.appendChild(i),s.appendChild(o);const d=document.createElement("div");if(d.classList.add("message-content"),d.innerHTML=marked.parse(t.text),s.appendChild(d),t.buttons&&t.buttons.length>0){const e=document.createElement("ul");e.classList.add("button-list"),t.buttons.forEach((n=>{const t=document.createElement("li"),s=document.createElement("button");s.textContent=n.title,s.addEventListener("click",(()=>{const e=s.closest("ul");e&&e.querySelectorAll("li button").forEach((e=>{e!==s&&(e.disabled=!0)})),y(n)})),t.appendChild(s),e.appendChild(t)})),s.appendChild(e)}e.threeDotLoader.parentNode===e.chatLog?e.chatLog.insertBefore(s,e.threeDotLoader):e.chatLog.appendChild(s),e.chatLog.scrollTop=e.chatLog.scrollHeight},y=e=>{b(e.title,"You"),x(e.payload),I("You",e.title)},x=(n=void 0)=>{if(v(),n&&i){const s={senderId:localStorage.getItem("feye_username"),recipientId:t.assignee.senderId||"TECH_SUPPORT",content:n,timestamp:new Date,agent:sessionStorage.getItem("agent")||"LiveChat"};i.send("/app/chat",{},JSON.stringify(s)),I("You",n),e.chatInput.style.height="25px",e.chatInput.value="",C()}},v=()=>{e.threeDotLoader.style.display="flex",e.chatLog.scrollTop=e.chatLog.scrollHeight},w=()=>{e.threeDotLoader.style.display="none"},I=(e,n)=>{t.conversation.push({recipient_id:e,text:n}),o()},L=(s,a,i)=>{const r=new Headers({"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic Y2Fib3Q6Y3BkX3VzZXJfaWNhYg=="}),c=new URLSearchParams({grant_type:"password",username:s,password:a,scope:"ADMIN"});fetch(`${n.BASE_URL+n.LOGIN_MEMBER}`,{method:"POST",headers:r,body:c,redirect:"follow"}).then((e=>e.json())).then((n=>{localStorage.setItem("feye_username",s),localStorage.setItem("feye_user_type",i),localStorage.setItem("feye_token",n.access_token),e.loginModal.style.display="none",S(),t.config.isLoggedIn=!0,o(),l(),d()})).catch((e=>{}))},E=(s,a,i)=>{const r=new Headers({"Content-Type":"application/json"});fetch(`${n.BASE_URL+n.LOGIN_STUDENT}`,{method:"POST",headers:r,body:JSON.stringify({registrationNo:s,password:a}),redirect:"follow"}).then((e=>e.json())).then((n=>{localStorage.setItem("feye_username",s),localStorage.setItem("feye_user_type",i),localStorage.setItem("feye_token",n.access_token),e.loginModal.style.display="none",S(),t.config.isLoggedIn=!0,o(),l(),d()})).catch((e=>{}))},S=()=>{e.login.innerText="Logout",e.signIn.innerText="Submit",e.signInText.innerText="your issue / query",e.submitIssue.style.display="block",e.attachBtn.style.display="block"},k=()=>{document.querySelector(".send-btn").addEventListener("click",(()=>{let n=e.chatInput.value.trim();n&&(b(n,"You"),x(n))})),e.chatInput.addEventListener("keypress",(n=>{if("Enter"===n.key&&!n.shiftKey){n.preventDefault();let t=e.chatInput.value.trim();t&&(b(t,"You"),x(t))}})),e.chatInput.addEventListener("input",(function(){C(this.value)})),e.attachBtn.addEventListener("click",(()=>{e.fileInput.click()})),e.fileInput.addEventListener("change",(e=>{const n=e.target.files[0];n&&B(n)})),e.chatContainer.querySelector("#chat-widget-built-in-icon").addEventListener("click",(()=>{a(e.chatBotArea,!0),t.config.widget=!0,o(),a(e.welcomeMessage,!1)})),e.chatContainer.querySelector(".close-btn")?.addEventListener("click",(()=>{a(e.chatBotArea,!1)}))},B=e=>{const t=new FormData;t.append("file",e),fetch(`${n.BASE_URL+n.FILE_UPLOAD}`,{method:"POST",body:t}).then((e=>e.json())).then((e=>{const n=e.file.url;b("","You",n,e.file.type),x(n)})).catch((e=>{}))},C=n=>{const t=e.attachBtn;t.style.transition="opacity 0.9s, height 0.9s",n?(t.style.opacity="0",t.style.height="0",t.style.display="none"):(t.style.opacity="1",t.style.height="auto",t.style.display="block")};e.submitIssue.addEventListener("click",(n=>{n.preventDefault(),a(e.submitIssueModal,!0),e.chatBotArea.classList.add("blur")})),e.submitIssueCloseModal.addEventListener("click",(()=>{e.submitIssueModal.style.display="none",e.chatBotArea.classList.remove("blur")})),e.submitIssueForm.addEventListener("submit",(t=>{t.preventDefault();const s=document.getElementById("issue-title").value,o=document.getElementById("issue-details").value,a=document.getElementById("issue-attachment").files,i=localStorage.getItem("feye_token"),d=new FormData;d.append("title",s),d.append("details",o);for(let e=0;e<a.length;e++)d.append("files",a[e]);const l=new Headers({Authorization:"Bearer "+i});fetch(`${n.BASE_URL+n.SUBMIT_ISSUE}`,{method:"POST",body:d,headers:l}).then((e=>e.json())).then((n=>{201===n.status?alert("Issue submitted successfully"):alert("Error submitting issue: "+n.message),e.submitIssueModal.style.display="none",e.chatBotArea.classList.remove("blur")})).catch((n=>{alert("Error submitting issue: "+n.message),e.submitIssueModal.style.display="none",e.chatBotArea.classList.remove("blur")}))}));const M=e=>{const t=localStorage.getItem("feye_token");fetch(`${n.BASE_URL+n.CHECK_TICKET}?ticketNo=${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{if(200===e.status&&e.data){const n=e.data;_(n)}})).catch((e=>{}))},_=n=>{const t=e.assigneeDetails;let s="";n.forEach((e=>{s+=`\n                  <div class="assignee-card">\n                      <h3>${e.assigneeName||"No Name Provided"}</h3>\n                      ${e.email?`<p>Email: ${e.email}</p>`:""}\n                      ${e.mobile?`<p>Mobile: ${e.mobile}</p>`:""}\n                      ${e.department?`<p>Department: ${e.department}</p>`:""}\n                      ${e.remarks?`<p>Remarks: ${e.remarks}</p>`:""}\n                  </div>\n              `})),t.innerHTML=s,e.assigneeDetailsModal.style.display="block"};e.assigneeDetailsCloseModal.addEventListener("click",(()=>{e.assigneeDetailsModal.style.display="none"}));const T=()=>{const t=localStorage.getItem("feye_token");fetch(`${n.BASE_URL+n.FETCH_ISSUE}`,{method:"GET",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then((e=>e.json())).then((n=>{var t;200===n.status&&(t=n.data,e.issuesList.innerHTML="",t.forEach((n=>{const t=document.createElement("div");t.className="issue-card",t.innerHTML=`\n                  <div>\n                      <h5>${n.title}</h5>\n                      <p>Status: <span class="issue-status">${n.status}</span></p>\n                  </div>\n                  <div class="issue-info">\n                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 4.5C7.05 4.5 2.61 7.03 1 12c1.61 4.97 6.05 7.5 11 7.5s9.39-2.53 11-7.5c-1.61-4.97-6.05-7.5-11-7.5Zm0 11c-1.93 0-3.5-1.57-3.5-3.5S10.07 8.5 12 8.5s3.5 1.57 3.5 3.5S13.93 15.5 12 15.5Zm0-6c-1.38 0-2.5 1.12-2.5 2.5S10.62 14.5 12 14.5s2.5-1.12 2.5-2.5S13.38 9.5 12 9.5Z"/></svg>\n                  </div>\n              `,e.issuesList.appendChild(t),t.querySelector(".issue-info").addEventListener("click",(()=>{M(n.issueId)}))})))})).catch((e=>{}))};e.clearChat.addEventListener("click",(e=>{e.preventDefault(),A()})),e.login.addEventListener("click",(n=>{n.preventDefault(),"login"===e.login.innerText.toLowerCase()?D():(t.config.isLoggedIn=!1,localStorage.removeItem("feye_username"),localStorage.removeItem("feye_user_type"),localStorage.removeItem("feye_token"),e.login.innerText="Login",e.signIn.innerText="Sign In",e.signInText.innerText="to submit your issue.",e.submitIssue.style.display="none",e.attachBtn.style.display="none",o(),l())})),e.lastIssuesLink.addEventListener("click",(()=>{T(),e.issuesModal.style.display="block"})),e.issuesListCloseModal.addEventListener("click",(()=>{e.issuesModal.style.display="none"}));const A=()=>{e.chatLog.innerHTML="",localStorage.removeItem("feye-ai-chat-widget-state")},D=()=>{e.loginModal.style.display="block",e.chatBotArea.classList.add("blur")};FeyeAIChatWidget={init:()=>{sessionStorage.getItem("agent")||sessionStorage.setItem("agent","Bot"),k(),(()=>{const n=document.querySelector(".feye-ai-close-modal"),t=document.getElementById("feye-ai-login-form");e.signIn.addEventListener("click",(()=>{"sign in"===e.signIn.innerText.toLowerCase()?D():s()}));const s=()=>{a(e.submitIssueModal,!0),e.chatBotArea.classList.add("blur")};n.addEventListener("click",(()=>{e.loginModal.style.display="none",e.chatBotArea.classList.remove("blur")})),e.memberRadio.addEventListener("change",(()=>{e.usernameLabel.textContent="Enrollment No.:"})),e.studentRadio.addEventListener("change",(()=>{e.usernameLabel.textContent="Reg. No.:"})),t.addEventListener("submit",(n=>{n.preventDefault();const s=document.getElementById("username").value,o=document.getElementById("password").value,a=t.userType.value;"Member"===a?L(s,o,a):E(s,o,a),e.chatBotArea.classList.remove("blur")}))})(),d(),e.settingsBtn.addEventListener("click",(n=>{n.stopPropagation(),e.settingsDropdown.classList.toggle("show")})),window.addEventListener("click",(n=>{n.target.matches(".settings-btn")||e.settingsDropdown.classList.contains("show")&&e.settingsDropdown.classList.remove("show")})),sessionStorage.getItem("neededShowWelcomeMessage")||(a(e.welcomeMessage,!0),sessionStorage.setItem("neededShowWelcomeMessage",!0),setTimeout((()=>{a(e.welcomeMessage,!1)}),5e3)),t.config.isLoggedIn?S():e.attachBtn.style.display="none",t.conversation.forEach((({recipient_id:e,text:n})=>{"You"===e?b(n,"You"):"FeyeBot"===e&&f(n)}))}},FeyeAIChatWidget.init()}n.src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.1.4/sockjs.min.js",n.onload=()=>{const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js",e.onload=t,document.body.appendChild(e);const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/marked/marked.min.js",n.onload=t,document.body.appendChild(n)},document.body.appendChild(n)}();